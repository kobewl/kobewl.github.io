---
mindmap-plugin: MySQL 基础
---

# 1 MySQL 大纲

## 1.1 MySQL 基础概念
- 1.1 数据库概述
	- 数据库类型比较
		- 关系型数据库（RDBMS）
			- MySQL、Oracle、PostgreSQL、SQL Server
			- 特点：事务支持、数据一致性、复杂查询
			- 应用场景：金融、电商、ERP 系统
		- 非关系型数据库（NoSQL）
			- Redis：键值存储、缓存
			- MongoDB：文档存储
			- Elasticsearch：搜索引擎
			- Neo4j：图数据库
			- 应用场景：高并发、大数据、实时计算
- 1.2 MySQL 架构
	- 客户端连接层
		- 连接处理、授权认证、安全管理
	- Server 层
		- 查询缓存（8.0 后移除）
		- 解析器：词法分析、语法分析
		- 优化器：选择索引、优化执行计划
		- 执行器：操作存储引擎、返回结果
	- 存储引擎层[[MySQL 存储引擎]]
		- 存储引擎概述
			- 插件式架构
			- 基于表而非数据库
			- 可自定义存储引擎
		- InnoDB（默认）
			- 事务支持（ACID）
			- 行级锁（高并发）
			- MVCC（多版本并发控制）
			- 外键约束
			- 聚簇索引
			- 数据和索引存储在同一文件
			- 支持崩溃恢复
		- MyISAM
			- 表级锁（并发性能较低）
			- 全文索引支持
			- 压缩索引
			- 数据和索引分开存储
			- 不支持事务和外键
			- 适合读密集场景
		- Memory
			- 内存存储（高性能）
			- 临时表
			- 表级锁
			- 支持哈希索引
			- 重启数据丢失
		- 存储引擎选择
			- 数据一致性要求
			- 并发访问性能
			- 索引类型需求
			- 内存使用限制
			- 备份和恢复需求

## 1.2 SQL 语言详解
- 2.1 SQL 分类与执行顺序
	- SQL 分类
		- DDL（数据定义）
			- CREATE、DROP、ALTER、TRUNCATE
		- DML（数据操作）
			- INSERT、UPDATE、DELETE
		- DQL（数据查询）
			- SELECT、WHERE、GROUP BY、HAVING、ORDER BY
		- DCL（数据控制）
			- GRANT、REVOKE
		- TCL（事务控制）
			- COMMIT、ROLLBACK、SAVEPOINT
	- SQL 执行顺序
		- Sub title
			- 1. FROM/JOIN
		- Sub title
			- 2. WHERE
		- Sub title
			- 3. GROUP BY
		- Sub title
			- 4. HAVING
		- Sub title
			- 5. SELECT
		- Sub title
			- 6. DISTINCT
		- Sub title
			- 7. ORDER BY
		- Sub title
			- 8. LIMIT
- 2.2 SQL 优化基础
	- 执行计划分析（EXPLAIN）
		- type 字段解析
		- key 使用分析
		- rows 扫描行数
		- Extra 信息解读
	- 常见优化方式
		- 避免全表扫描
		- 合理使用索引
		- 优化 JOIN 查询
		- 优化子查询
		- 合理使用临时表

## 1.3 MySQL 索引
- 3.1 索引基础
	- 什么是索引[[MySQL索引#^40e189]]
	- 索引数据结构
		- B+Tree 索引
			- 为什么选择 B+Tree
			- 与 B-Tree 的区别
			- 聚簇索引与非聚簇索引的实现
		- Hash 索引
			- 适用场景
			- 限制条件
		- 全文索引
			- 实现原理
			- 使用场景
	- 什么情况下不推荐使用索引[[MySQL索引#^d59388]]
- 3.2 索引分类[[MySQL索引#^140c3c]]
	- 按数据结构分类
		- B+Tree 索引
		- Hash 索引
		- 全文索引
	- 按用途分类
		- 主键索引
		- 唯一索引
		- 普通索引
		- 联合索引
		- 覆盖索引
		- 前缀索引
	- 按存储形式分类
		- 聚簇索引
		- 非聚簇索引（二级索引）
- 3.3 索引优化策略
	- 索引设计原则
		- 最左前缀原则
		- 选择性原则
		- 覆盖索引原则
		- 索引列数限制
	- 索引失效场景
		- 函数操作
		- 类型转换
		- 范围查询
		- OR 条件
		- Like 前缀匹配
		- IS NULL 处理
	- 索引优化实践
		- 避免过多索引
		- 定期维护索引
		- 合理使用复合索引

## 1.4 事务管理
- 事务基础
	- 什么是事务[[MySQL 事务#^e76500]]
	- 事务的状态有哪些[[MySQL 事务#^0c60f5]]
- 4.1 ACID 特性实现[[MySQL 事务#^c75474]]
	- 原子性（Atomicity）
		- Undo Log 实现机制
		- 回滚操作原理
	- 一致性（Consistency）
		- 约束实现
		- 触发器作用
		- 外键保证
	- 隔离性（Isolation）
		- MVCC 实现原理
		- 锁机制配合
	- 持久性（Durability）
		- Redo Log 实现机制
		- 双写缓冲
		- 刷盘策略
- 4.2 事务隔离级别[[MySQL 事务#^c55f20]]
	- 读未提交（Read Uncommitted）
		- 脏读问题
		- 性能特点
	- 读已提交（Read Committed）
		- 不可重复读问题
		- 实现机制
	- 可重复读（Repeatable Read）
		- 幻读问题
		- InnoDB 默认级别
		- MVCC 实现
	- 串行化（Serializable）
		- 完全串行执行
		- 性能影响
		- 使用场景

## 1.5 锁机制详解
- 5.1 锁的分类
	- 按粒度分类
		- 全局锁
			- 使用场景
			- 影响范围
		- 表级锁
			- 表锁
			- 元数据锁（MDL）
			- 意向锁
		- 行级锁
			- Record Lock
			- Gap Lock
			- Next-Key Lock
	- 按性质分类
		- 共享锁（S 锁）
		- 排他锁（X 锁）
		- 意向共享锁（IS 锁）
		- 意向排他锁（IX 锁）
- 5.2 锁问题与优化
	- 死锁
		- 产生原因
		- 检测机制
		- 预防策略
		- 处理方法
	- 锁优化
		- 减少锁范围
		- 缩短锁持有时间
		- 避免锁升级
		- 合理使用锁类型

## 1.6 性能优化
- 6.1 查询优化
	- 执行计划优化
		- EXPLAIN 分析
		- 索引使用优化
		- JOIN 优化
	- SQL 语句优化
		- 避免全表扫描
		- 减少回表查询
		- 使用覆盖索引
		- 控制查询范围
	- 慢查询优化
		- 慢查询日志配置
		- 分析工具使用
		- 优化方案制定
- 6.2 配置优化
	- 缓冲池优化
		- innodb_buffer_pool_size
		- innodb_buffer_pool_instances
	- 并发参数优化
		- max_connections
		- innodb_thread_concurrency
	- 日志参数优化
		- binlog_cache_size
		- innodb_log_file_size

## 1.7 高可用架构
- 7.1 主从复制
	- 复制原理
		- binlog
		- relay log
		- 复制线程工作机制
	- 复制模式
		- 异步复制
		- 半同步复制
		- 组复制
	- 主从延迟
		- 产生原因
		- 解决方案
		- 监控方法
- 7.2 数据备份与恢复
	- 备份策略
		- 全量备份
		- 增量备份
		- 差异备份
	- 备份工具
		- mysqldump
		- xtrabackup
		- mysqlpump
	- 恢复策略
		- 时间点恢复
		- 闪回恢复
		- 故障恢复最佳实践

## 1.8 MySQL 8.0 新特性
- 窗口函数
- 通用表表达式（CTE）
- 降序索引
- 隐藏索引
- JSON 增强
- 原子 DDL
- 资源组管理
- 角色管理
- InnoDB 增强
	- 自增列持久化
	- 死锁检测控制
	- 细粒度表空间加密

## 1.9 常见问题与最佳实践
- 数据类型选择
	- 数值类型
	- 字符串类型
	- 时间日期类型
	- 特殊类型
- 大表优化
	- 分库分表
	- 读写分离
	- 垂直拆分
	- 水平拆分
- 常见故障处理
	- CPU 使用率高
	- IO 瓶颈
	- 连接数过多
	- 主从延迟