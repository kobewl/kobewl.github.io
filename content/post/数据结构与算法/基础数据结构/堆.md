---
title: "1 堆 (Heap)"
date: 2023-01-01T01:01:01+08:00
categories: ["D:"]
tags: ["D:"]
draft: false
---
# 1 堆 (Heap)

## 1.1 基本概念

### 1.1.1 定义

- 堆是一种完全二叉树结构
- 分为最大堆和最小堆
- 父节点与子节点之间满足堆特性

### 1.1.2 堆的性质

```mermaid
graph TD
    subgraph "最大堆示例"
        A1((100)) --> B1((85))
        A1 --> C1((90))
        B1 --> D1((65))
        B1 --> E1((50))
        C1 --> F1((70))
    end
    
    style A1 fill:#f9f,stroke:#333,stroke-width:2px
    style B1 fill:#bbf,stroke:#333,stroke-width:2px
    style C1 fill:#bbf,stroke:#333,stroke-width:2px
    style D1 fill:#bfb,stroke:#333,stroke-width:2px
    style E1 fill:#bfb,stroke:#333,stroke-width:2px
    style F1 fill:#bfb,stroke:#333,stroke-width:2px
```

```mermaid
graph TD
    subgraph "最小堆示例"
        A2((10)) --> B2((25))
        A2 --> C2((15))
        B2 --> D2((45))
        B2 --> E2((35))
        C2 --> F2((20))
    end
    
    style A2 fill:#f9f,stroke:#333,stroke-width:2px
    style B2 fill:#bbf,stroke:#333,stroke-width:2px
    style C2 fill:#bbf,stroke:#333,stroke-width:2px
    style D2 fill:#bfb,stroke:#333,stroke-width:2px
    style E2 fill:#bfb,stroke:#333,stroke-width:2px
    style F2 fill:#bfb,stroke:#333,stroke-width:2px
```

1. **完全二叉树性质**

   - 除最后一层外，其他层都是满的
   - 最后一层的节点从左到右填充
   - 便于数组存储和索引计算

2. **堆序性质**
   - 最大堆：父节点值 ≥ 子节点值
   - 最小堆：父节点值 ≤ 子节点值
   - 兄弟节点之间没有大小关系

### 1.1.3 堆的存储

```mermaid
graph LR
    subgraph "数组存储示例（最大堆）"
        A["100"] --- B["85"] --- C["90"] --- D["65"] --- E["50"] --- F["70"]
    end
    
    style A fill:#f9f,stroke:#333,stroke-width:2px
    style B fill:#bbf,stroke:#333,stroke-width:2px
    style C fill:#bbf,stroke:#333,stroke-width:2px
    style D fill:#bfb,stroke:#333,stroke-width:2px
    style E fill:#bfb,stroke:#333,stroke-width:2px
    style F fill:#bfb,stroke:#333,stroke-width:2px
```

父子关系：
- 父节点 i 的左子节点：2i + 1
- 父节点 i 的右子节点：2i + 2
- 子节点 i 的父节点：(i-1)/2

