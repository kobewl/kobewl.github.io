---
title: "1 双指针算法 (Two Pointers Technique)"
date: 2023-01-01T01:01:01+08:00
categories: ["D:"]
tags: ["D:"]
draft: false
---
# 1 双指针算法 (Two Pointers Technique)

## 1.1 基本概念

双指针算法是一种常见的解题技巧，主要思想是利用两个指针在同一数据结构（例如数组、字符串或链表）上同时进行遍历，从而高效找到满足特定条件的子问题或子区间。常见的双指针类型包括：

- **左右指针 (Left-Right Pointers)：**  
  一般用于有序数组或字符串，一个指针从左侧开始，一个指针从右侧开始，逐步向中间靠拢，常用于查找回文、两数之和等问题。

- **快慢指针 (Fast and Slow Pointers)：**  
  快指针（fast pointer）每次走得快，慢指针（slow pointer）每次走得慢，常用于链表中检测环或寻找链表中点等问题。

- **同向双指针 (Two Pointers Moving in the Same Direction)：**  
  两个指针从同一方向出发，通常用于滑动窗口问题或寻找满足特定条件的子数组/子字符串。

---

## 1.2 应用场景

双指针算法在解决以下问题时表现出色：

- **数组问题：**
  - 查找有序数组中的两数之和（例如 LeetCode 的 Two Sum II）。
  - 移除重复元素、划分区间或合并区间。

- **字符串问题：**
  - 检查字符串是否为回文 (Palindromic String)。
  - 反转字符串或处理字符替换问题。

- **链表问题：**
  - 使用快慢指针找到链表中点 (Middle of the Linked List)。
  - 检测链表是否存在环 (Cycle Detection)。

- **滑动窗口问题：**
  - 快速定位满足条件的子数组或子字符串，结合双指针动态调整窗口大小。

---

## 1.3 经典问题示例

### 1.3.1 两数之和 II - 输入有序数组 (Two Sum II)

给定一个升序排列的整数数组和一个目标值，利用左右指针方法可以在 O(n) 时间内找到满足目标和的两个数。

```java
/**
 * 利用左右指针在有序数组中查找满足两数之和等于目标值的两个数
 */
public class TwoSumII {
    /**
     * @param numbers 已排序的整数数组
     * @param target  目标和
     * @return 返回满足条件的两个数的索引（基于1的索引）
     */
    public int[] twoSum(int[] numbers, int target) {
        int left = 0;                           // 左指针初始化为数组第一个位置
        int right = numbers.length - 1;         // 右指针初始化为数组最后一个位置

        while (left < right) {
            int sum = numbers[left] + numbers[right];  // 当前两个数的和
            if (sum == target) {
                // 如果和等于目标，则返回对应的索引（转换为1基索引）
                return new int[]{left + 1, right + 1};
            } else if (sum < target) {
                // 当前和小于目标，左指针右移以增大和
                left++;
            } else {
                // 当前和大于目标，右指针左移以减小和
                right--;
            }
        }
        // 未找到满足条件的两个数，返回空数组
        return new int[]{};
    }
}
```

### 1.3.2 字符串反转 (Reverse String)

使用左右指针交换字符串中对称位置的字符，实现字符数组的反转。

```java
/**
 * 使用双指针将字符数组反转
 */
public class ReverseString {
    /**
     * @param s 需要反转的字符数组
     */
    public void reverseString(char[] s) {
        int left = 0;              // 左指针
        int right = s.length - 1;    // 右指针
        // 当左指针小于右指针时进行交换
        while (left < right) {
            // 交换 s[left] 和 s[right]
            char temp = s[left];
            s[left] = s[right];
            s[right] = temp;
            left++;    // 左指针右移
            right--;   // 右指针左移
        }
    }
}
```

### 1.3.3 检查回文字符串 (Palindromic String)

判断一个字符串是否为回文，通过左右指针从两端向中间遍历比较字符。

```java
/**
 * 检查给定字符串是否为回文字符串
 */
public class PalindromeChecker {
    /**
     * @param s 输入的字符串
     * @return 如果字符串是回文返回 true，否则返回 false
     */
    public boolean isPalindrome(String s) {
        int left = 0;
        int right = s.length() - 1;
        // 同时移动左右指针，比较左右字符是否一致
        while (left < right) {
            if (s.charAt(left) != s.charAt(right)) {
                return false;  // 如果不相等，则不是回文
            }
            left++;
            right--;
        }
        return true;
    }
}
```

### 1.3.4 快慢指针示例 - 链表中点 (Middle of the Linked List)

使用快慢指针在链表中找到中间节点，快指针每次走两步，慢指针每次走一步，当快指针到达末尾时，慢指针正处在中间位置。

```java
/**
 * 定义链表节点
 */
public class ListNode {
    int val;
    ListNode next;
    ListNode(int x) { val = x; }
}

/**
 * 使用快慢指针找到链表的中间节点
 */
public class LinkedListMiddle {
    /**
     * @param head 链表的头节点
     * @return 返回链表的中间节点
     */
    public ListNode middleNode(ListNode head) {
        // 初始化快指针和慢指针均指向头节点
        ListNode slow = head;
        ListNode fast = head;
        // 快指针每次走两步，慢指针每次走一步
        while (fast != null && fast.next != null) {
            slow = slow.next;         // 慢指针走一步
            fast = fast.next.next;      // 快指针走两步
        }
        // 当快指针到达链表尾部时，慢指针正好在链表中点
        return slow;
    }
}
```

---

## 1.4 双指针技巧总结与注意事项

- **指针初始化：**  
  根据问题类型选择合适的初始位置，如左右边界或同一位置。

- **指针移动规则：**  
  根据具体问题设计指针移动步长与更新条件，确保搜索区间不断缩小，避免遗漏解。

- **边界条件：**  
  谨慎处理循环终止条件，防止数组越界或陷入无限循环。

- **时间复杂度：**  
  双指针方法通常能将时间复杂度降低到 O(n)，适用于大规模数据处理问题。

- **与其他技巧结合：**  
  可与滑动窗口、排序和哈希方法结合使用，以解决更多复杂问题。

---

## 1.5 总结

双指针算法是一种简单而高效的技巧，通过同时操作两个指针可以高效解决数组、字符串以及链表中的多种问题。掌握双指针的基本概念、常见应用场景及注意事项，将帮助你在面试和工程实践中快速提升解题能力。






