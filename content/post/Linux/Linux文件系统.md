---
title: "1 Linux 文件系统"
date: 2023-01-01T01:01:01+08:00
categories: ["D:"]
tags: ["D:"]
draft: false
---
# 1 Linux 文件系统

## 1.1 文件系统类型

### 1.1.1 常见文件系统

- **ext4**：Linux 默认文件系统
  - 支持更大的文件和分区
  - 性能优化
  - 日志功能
- **xfs**：高性能文件系统
- **btrfs**：新一代文件系统
- **tmpfs**：内存文件系统

### 1.1.2 文件系统特性

- 日志功能
- 快照支持
- 配额管理
- 加密支持

## 1.2 inode

### 1.2.1 概念

- 存储文件元数据
- 每个文件一个 inode
- inode 号是文件的唯一标识

### 1.2.2 包含信息

- 文件大小
- 设备 ID
- 用户 ID
- 组 ID
- 文件权限
- 时间戳
- 数据块指针

## 1.3 文件链接

### 1.3.1 硬链接

```bash
ln source target
```

- 与原文件共享 inode
- 只能链接文件
- 不能跨文件系统

### 1.3.2 软链接

```bash
ln -s source target
```

- 创建新的 inode
- 可以链接目录
- 可以跨文件系统

## 1.4 文件系统操作

### 1.4.1 挂载管理

```bash
mount       # 挂载文件系统
umount      # 卸载文件系统
df -h       # 查看文件系统使用情况
blkid       # 查看块设备信息
```

### 1.4.2 文件系统检查

```bash
fsck        # 检查和修复文件系统
e2fsck      # ext文件系统专用工具
xfs_repair  # xfs文件系统修复
```

## 1.5 磁盘管理

### 1.5.1 分区管理

```bash
fdisk       # 分区工具
parted      # 高级分区工具
gparted     # 图形化分区工具
```

### 1.5.2 LVM (逻辑卷管理)

- **物理卷(PV)**
- **卷组(VG)**
- **逻辑卷(LV)**

```bash
pvcreate    # 创建物理卷
vgcreate    # 创建卷组
lvcreate    # 创建逻辑卷
```

## 1.6 文件系统优化

### 1.6.1 性能优化

- noatime 挂载选项
- 日志模式选择
- 块大小优化
- 预读设置

### 1.6.2 监控工具

```bash
iostat      # IO统计信息
iotop       # IO使用率top
fuser       # 查看文件使用者
lsof        # 列出打开的文件
```

## 1.7 面试重点

1. **文件系统结构**

   - inode 的概念和作用
   - 文件系统的层次结构
   - 各种文件系统的特点

2. **链接**

   - 硬链接 vs 软链接的区别
   - 使用场景
   - 限制条件

3. **LVM**

   - 基本概念
   - 优势
   - 常用操作

4. **性能相关**
   - IO 调度算法
   - 文件系统选择考虑因素
   - 性能优化方法

