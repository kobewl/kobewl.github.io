---
title: "1 Elasticsearch 基础概念"
date: 2023-01-01T01:01:01+08:00
categories: ["D:"]
tags: ["D:"]
draft: false
---
# 1 Elasticsearch 基础概念

## 1.1 ES 的定义与特点

### 1.1.1 定义
Elasticsearch 是一个分布式、RESTful 风格的搜索和数据分析引擎，基于 Apache Lucene 构建。它能够解决不断涌现出的各种用例，可以作为一个分布式文档数据库、搜索引擎、分析引擎和监控引擎使用。

### 1.1.2 主要特点

1. **分布式搜索引擎**
   - 可以快速地存储、搜索和分析大量数据
   - 分布式架构保证了系统的高可用性和可扩展性
   - 支持集群自动发现和故障转移

2. **近实时搜索**
   - 文档写入到可被搜索的延迟很短，通常是1秒
   - 支持实时 CRUD（创建、读取、更新、删除）操作
   - 提供实时分析和搜索功能

3. **RESTful API**
   - 提供简单的 REST API
   - 支持多种编程语言
   - 使用 JSON 作为数据交换格式

4. **Schema-free**
   - 支持动态映射
   - 自动检测和添加新的字段
   - 灵活的数据模型

## 1.2 核心概念

### 1.2.1 Index（索引）
- 索引是文档的集合
- 类似于关系数据库中的数据库概念
- 可以创建多个索引，每个索引可以有自己的设置和映射

### 1.2.2 Type（类型）
- 在 7.0 版本后被废弃
- 一个索引中只能包含一个 type
- 为了向后兼容，默认 type 名为 _doc

### 1.2.3 Document（文档）
- 可以被索引的基本信息单元
- 以 JSON 格式表示
- 类似于关系数据库中表的一行记录

### 1.2.4 Mapping（映射）
- 定义文档及其字段的存储和索引方式
- 类似于关系数据库中的表结构
- 可以显式定义或由 ES 自动推断

### 1.2.5 Field（字段）
- 文档中的字段
- 每个字段都有特定的数据类型
- 支持多种数据类型：text、keyword、date、long、double、boolean 等

### 1.2.6 Shards（分片）
- 索引的水平分割
- 提供了分布式搜索的能力
- 每个分片都是一个完整的 Lucene 索引

### 1.2.7 Replicas（副本）
- 分片的备份
- 提供高可用性
- 提升搜索性能（可以并行搜索）

## 1.3 基本工作流程

1. **索引文档流程**
   - 客户端向 ES 发送索引请求
   - ES 确定文档应该存储在哪个分片上
   - 将文档路由到相应的主分片
   - 主分片成功索引后，复制到副本分片

2. **搜索文档流程**
   - 客户端发送搜索请求到 ES 节点
   - 节点将请求转发到相关分片
   - 每个分片执行本地搜索
   - 返回结果合并和排序

## 1.4 应用场景

1. **全文搜索**
   - 网站搜索
   - 文档搜索
   - 商品搜索

2. **日志分析**
   - 系统日志分析
   - 应用程序日志分析
   - 安全日志分析

3. **指标分析**
   - 业务数据分析
   - 性能监控
   - 用户行为分析

4. **应用性能监控**
   - 系统资源监控
   - 应用性能监控
   - 网络性能监控
